# Puppet Name: <%= @title %>
#
<%
  indexers       = scope['::splunk::params::tcpout']
  cacertpath     = scope['::splunk::params::cacertpath']
  servercertpass = scope['::splunk::params::servercertpass']
  servercertpath = scope['::splunk::params::servercertpath']
  sslclientcompression = scope['::splunk::params::sslclientcompression']
  sslverify = scope['::splunk::params::sslverify']
  autolb = scope['splunk::params::autolb']
  autolbfrequency = scope['splunk::params::autolbfrequency']
  forcetimebasedautolb = scope['splunk::params::forcetimebasedautolb']
-%>
[tcpout]
indexAndForward = false
defaultGroup = <%= indexers['group'] %>

[tcpout:<%= indexers['group'] %>]
autoLB = <%= autolb %>
autoLBFrequency = <%= autolbfrequency %>
disabled = false
forceTimebasedAutoLB = <%= forcetimebasedautolb %>
server = <% indexers['servers'].each do |server| %><%= server %><%= "," unless server == indexers['servers'].last %><% end %>
sslCertPath = $SPLUNK_HOME/etc/auth/<%= servercertpath %>
sslPassword = <%= servercertpass %>
sslRootCAPath = $SPLUNK_HOME/etc/auth/<%= cacertpath %>
sslVerifyServerCert = <%= sslverify %>
sslCommonNameToCheck = <%= indexers['cname'] %>
useClientSSLCompression = <%= sslclientcompression %>
