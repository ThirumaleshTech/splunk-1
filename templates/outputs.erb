# Puppet Name: <%= @title %>
#
<%
  indexers             = scope['::splunk::params::tcpout']
  cacertpath           = scope['::splunk::params::cacertpath']
  ciphersuite          = scope['::splunk::params::ciphersuite']
  servercertpass       = scope['::splunk::params::servercertpass']
  servercertpath       = scope['::splunk::params::servercertpath']
  sslclientcompression = scope['::splunk::params::sslclientcompression']
  sslverify            = scope['::splunk::params::sslverify']
  sslversions          = scope['::splunk::params::sslversions']
  autolb               = scope['splunk::params::autolb']
  autolbfrequency      = scope['splunk::params::autolbfrequency']
  forcetimebasedautolb = scope['splunk::params::forcetimebasedautolb']
-%>
[tcpout]
indexAndForward = false
defaultGroup = <%= indexers['group'] %>

[tcpout:<%= indexers['group'] %>]
autoLBFrequency = <%= autolbfrequency %>
cipherSuite = <%= ciphersuite %>
clientCert = $SPLUNK_HOME/etc/auth/<%= servercertpath %>
disabled = false
forceTimebasedAutoLB = <%= forcetimebasedautolb %>
server = <% indexers['servers'].each do |server| %><%= server %><%= "," unless server == indexers['servers'].last %><% end %>
sslCommonNameToCheck = <%= indexers['cname'] %>
sslPassword = <%= servercertpass %>
sslVerifyServerCert = <%= sslverify %>
sslVersions = <%= sslversions %>
useClientSSLCompression = <%= sslclientcompression %>
